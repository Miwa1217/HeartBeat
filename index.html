<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
	<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, user-scale=yes, initial-scale=1.0, maximum-scale=5.0" />

  <script type="text/javascript">

    //iOS版
    var request;
    var status = 0;

    function clickPlay() {
      if (status == 0) {
        status = 1;
        request = new XMLHttpRequest();
        request.open("GET", "heart.mp3", true);
        request.responseType = "arraybuffer";
        request.onload = completeOnLoad;
        request.send();
      }
      else if (status == 2) {
        window.AudioContext = window.AudioContext || window.webkitAudioContext;
        context = new AudioContext();

        source = context.createBufferSource();

        // オーディオをデコード
        context.decodeAudioData(request.response, function (buf) {
          source.buffer = buf;
          source.loop = false;
          source.connect(context.destination);
          source.start(0);
        });
      }
    };
    
    /*
    //下記では動作しないので注意
      else if (status == 2) {
        window.AudioContext = window.AudioContext || window.webkitAudioContext;
        context = new AudioContext();

        source = context.createBufferSource();

        // オーディオをデコード
        context.decodeAudioData(request.response, function (buf) {
          source.buffer = buf;
          source.loop = false;
        });

        source.connect(context.destination);
        source.start(0);
      }
    */

    function completeOnLoad() {
      status = 2;
      var elem = document.getElementById("Play");
      elem.innerText = "再生";
    }
  </script>

</head>
<body>
  <a id="Play" href="javascript:void(0);" onclick="clickPlay();">読み込み</a><br />
  <a id="Pasue" href="javascript:void(0);">停止</a><br />

</body>
</html>